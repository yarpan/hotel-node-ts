FAIL tests/unit/models/User.test.ts (12.167 s)
  User Model
    Password Hashing
      Ã— should hash password before saving (459 ms)
      Ã— should compare passwords correctly (360 ms)
      Ã— should not hash password again if not modified (349 ms)
    Validation
      âˆš should require email (19 ms)
      âˆš should require password (9 ms)
      Ã— should require unique email (364 ms)
      âˆš should require valid role (10 ms)
      Ã— should accept valid roles (349 ms)
      âˆš should require profile firstName (9 ms)
      âˆš should require profile lastName (10 ms)
    Timestamps
      Ã— should have createdAt and updatedAt timestamps (393 ms)
      Ã— should update updatedAt on modification (364 ms)

  â— User Model â€º Password Hashing â€º should hash password before saving

    TypeError: next is not a function

    [0m [90m 86 |[39m         next()[33m;[39m
     [90m 87 |[39m     } [36mcatch[39m (error[33m:[39m any) {
    [31m[1m>[22m[39m[90m 88 |[39m         next(error)[33m;[39m
     [90m    |[39m         [31m[1m^[22m[39m
     [90m 89 |[39m     }
     [90m 90 |[39m })[33m;[39m
     [90m 91 |[39m[0m

      at model.<anonymous> (src/models/User.ts:88:9)
      at Kareem.execPre (node_modules/kareem/index.js:65:24)
      at model.$__save (node_modules/mongoose/lib/model.js:369:5)
      at model.save (node_modules/mongoose/lib/model.js:609:5)
      at Object.<anonymous> (tests/unit/models/User.test.ts:17:13)

  â— User Model â€º Password Hashing â€º should compare passwords correctly

    TypeError: next is not a function

    [0m [90m 86 |[39m         next()[33m;[39m
     [90m 87 |[39m     } [36mcatch[39m (error[33m:[39m any) {
    [31m[1m>[22m[39m[90m 88 |[39m         next(error)[33m;[39m
     [90m    |[39m         [31m[1m^[22m[39m
     [90m 89 |[39m     }
     [90m 90 |[39m })[33m;[39m
     [90m 91 |[39m[0m

      at model.<anonymous> (src/models/User.ts:88:9)
      at Kareem.execPre (node_modules/kareem/index.js:65:24)
      at model.$__save (node_modules/mongoose/lib/model.js:369:5)
      at model.save (node_modules/mongoose/lib/model.js:609:5)
      at node_modules/mongoose/lib/model.js:2714:9
          at async Promise.all (index 0)
      at model.create (node_modules/mongoose/lib/model.js:2699:11)
      at Object.<anonymous> (tests/unit/models/User.test.ts:26:26)

  â— User Model â€º Password Hashing â€º should not hash password again if not modified

    TypeError: next is not a function

    [0m [90m 86 |[39m         next()[33m;[39m
     [90m 87 |[39m     } [36mcatch[39m (error[33m:[39m any) {
    [31m[1m>[22m[39m[90m 88 |[39m         next(error)[33m;[39m
     [90m    |[39m         [31m[1m^[22m[39m
     [90m 89 |[39m     }
     [90m 90 |[39m })[33m;[39m
     [90m 91 |[39m[0m

      at model.<anonymous> (src/models/User.ts:88:9)
      at Kareem.execPre (node_modules/kareem/index.js:65:24)
      at model.$__save (node_modules/mongoose/lib/model.js:369:5)
      at model.save (node_modules/mongoose/lib/model.js:609:5)
      at node_modules/mongoose/lib/model.js:2714:9
          at async Promise.all (index 0)
      at model.create (node_modules/mongoose/lib/model.js:2699:11)
      at Object.<anonymous> (tests/unit/models/User.test.ts:47:26)

  â— User Model â€º Validation â€º should require unique email

    TypeError: next is not a function

    [0m [90m 86 |[39m         next()[33m;[39m
     [90m 87 |[39m     } [36mcatch[39m (error[33m:[39m any) {
    [31m[1m>[22m[39m[90m 88 |[39m         next(error)[33m;[39m
     [90m    |[39m         [31m[1m^[22m[39m
     [90m 89 |[39m     }
     [90m 90 |[39m })[33m;[39m
     [90m 91 |[39m[0m

      at model.<anonymous> (src/models/User.ts:88:9)
      at Kareem.execPre (node_modules/kareem/index.js:65:24)
      at model.$__save (node_modules/mongoose/lib/model.js:369:5)
      at model.save (node_modules/mongoose/lib/model.js:609:5)
      at node_modules/mongoose/lib/model.js:2714:9
          at async Promise.all (index 0)
      at model.create (node_modules/mongoose/lib/model.js:2699:11)
      at Object.<anonymous> (tests/unit/models/User.test.ts:99:13)

  â— User Model â€º Validation â€º should accept valid roles

    TypeError: next is not a function

    [0m [90m 86 |[39m         next()[33m;[39m
     [90m 87 |[39m     } [36mcatch[39m (error[33m:[39m any) {
    [31m[1m>[22m[39m[90m 88 |[39m         next(error)[33m;[39m
     [90m    |[39m         [31m[1m^[22m[39m
     [90m 89 |[39m     }
     [90m 90 |[39m })[33m;[39m
     [90m 91 |[39m[0m

      at model.<anonymous> (src/models/User.ts:88:9)
      at Kareem.execPre (node_modules/kareem/index.js:65:24)
      at model.$__save (node_modules/mongoose/lib/model.js:369:5)
      at model.save (node_modules/mongoose/lib/model.js:609:5)
      at node_modules/mongoose/lib/model.js:2714:9
          at async Promise.all (index 0)
      at model.create (node_modules/mongoose/lib/model.js:2699:11)
      at Object.<anonymous> (tests/unit/models/User.test.ts:143:30)

  â— User Model â€º Timestamps â€º should have createdAt and updatedAt timestamps

    TypeError: next is not a function

    [0m [90m 86 |[39m         next()[33m;[39m
     [90m 87 |[39m     } [36mcatch[39m (error[33m:[39m any) {
    [31m[1m>[22m[39m[90m 88 |[39m         next(error)[33m;[39m
     [90m    |[39m         [31m[1m^[22m[39m
     [90m 89 |[39m     }
     [90m 90 |[39m })[33m;[39m
     [90m 91 |[39m[0m

      at model.<anonymous> (src/models/User.ts:88:9)
      at Kareem.execPre (node_modules/kareem/index.js:65:24)
      at model.$__save (node_modules/mongoose/lib/model.js:369:5)
      at model.save (node_modules/mongoose/lib/model.js:609:5)
      at node_modules/mongoose/lib/model.js:2714:9
          at async Promise.all (index 0)
      at model.create (node_modules/mongoose/lib/model.js:2699:11)
      at Object.<anonymous> (tests/unit/models/User.test.ts:189:26)

  â— User Model â€º Timestamps â€º should update updatedAt on modification

    TypeError: next is not a function

    [0m [90m 86 |[39m         next()[33m;[39m
     [90m 87 |[39m     } [36mcatch[39m (error[33m:[39m any) {
    [31m[1m>[22m[39m[90m 88 |[39m         next(error)[33m;[39m
     [90m    |[39m         [31m[1m^[22m[39m
     [90m 89 |[39m     }
     [90m 90 |[39m })[33m;[39m
     [90m 91 |[39m[0m

      at model.<anonymous> (src/models/User.ts:88:9)
      at Kareem.execPre (node_modules/kareem/index.js:65:24)
      at model.$__save (node_modules/mongoose/lib/model.js:369:5)
      at model.save (node_modules/mongoose/lib/model.js:609:5)
      at node_modules/mongoose/lib/model.js:2714:9
          at async Promise.all (index 0)
      at model.create (node_modules/mongoose/lib/model.js:2699:11)
      at Object.<anonymous> (tests/unit/models/User.test.ts:207:26)

Test Suites: 1 failed, 1 total
Tests:       7 failed, 5 passed, 12 total
Snapshots:   0 total
Time:        13.427 s
Ran all test suites matching tests/unit/models/User.test.ts.
